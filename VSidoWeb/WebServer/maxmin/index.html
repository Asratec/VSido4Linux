<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf8">
    <title>VSido Web App Sample</title>
    <!-- Viewport mobile tag for sensible mobile support -->
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<!--meta name="viewport" content="user-scalable=no"-->

    <!--STYLES-->
    <link rel="stylesheet" href="/styles/importer.css">
    <link rel="stylesheet" href="/styles/jquery.mobile-1.4.5.min.css">
    <link rel="stylesheet" href="/styles/vsido.connection.css">
    <link rel="stylesheet" href="/styles/vsido.hand.css">
    <link rel="stylesheet" href="/styles/vsido.layout.css">
    <link rel="stylesheet" href="/styles/vsido.walk.css">
    <!--STYLES END-->
    
	<!--SCRIPTS-->
<script src="/js/jquery-2.1.1.min.js"></script>
<script src="/js/jquery.mobile-1.4.5.min.js"></script>
<script src="/js/vsido.client.api.js"></script>
<!--SCRIPTS END-->
	
	
  </head>

  <body>
    <a href="/" target="_self">トップに戻る</a>

<style type="text/css">
<!--
.add {
 width:50px;
}
.length {
 width:50px;
}
-->
</style>	
	
	
<script type="text/javascript">
function getValue(id,cmd){
	var checkName = ":input[name='s";
	checkName = checkName + id;
	checkName = checkName + "']:checked";
	//console.log(checkName);
	
	var minName = ":input[name='s";
	minName = minName + id;
	minName = minName + "_min']";
	//console.log(minName);
	
	var maxName = ":input[name='s";
	maxName = maxName + id;
	maxName = maxName + "_max']";
	//console.log(maxName);
	
	if($(checkName).val()) {
		return {'sid':id,'min':parseFloat($(minName).val()),'max':parseFloat($(maxName).val())};
	}
	return null;
}

function checkOn(id){
	var checkName = ":input[name='s";
	checkName = checkName + id;
	checkName = checkName + "']";
	//console.log(checkName);
	$(checkName).attr("checked", true); 
}


$(function(){
	var CONST_SERVO_MAX = 20;
	var connect = new vsido.Connect();
	$("#setmaxmin").click(function(){
		var minMax = new vsido.SetServoMinMaxAngle();
		for (i = 1; i < CONST_SERVO_MAX +1; i = i +1){
			var angleReq = getValue(i,minMax);
			if(angleReq) {
				console.log(angleReq);
				minMax.addMinMax(angleReq.sid,angleReq.min,angleReq.max);
			}
		}
		$("#vsido_output_request").text('send:<'+JSON.stringify(minMax)+'>');
		connect.send(minMax,function(response){
			console.log(JSON.stringify(response));
			$("#vsido_output_response").text(
				'response:<' + JSON.stringify(response) + '>'
			);
		});
	});


	$("#all_select").click(function(){
		for (i = 1; i < CONST_SERVO_MAX +1; i = i +1){
			checkOn(i);
		}
	});
	
});
</script>


	<div class="vsido_div_top">
	   <label>最大・最小角設定:</lable>
	</div>
	<br>
	<div>
		<input type="button" id="all_select" value="すべて選択" />
		<input type="button" id="setmaxmin" value="設定" />
	</div>
	<br>


	<table border="1" bordercolor="#7f0000">
	<tr>
	<td>
	<p>
	<input type="checkbox" class="checkbox" name="s1" value="1">サーボ 1:
	<br>
	<input type="text" class="max" name="s1_max" value="100.0">
	<input type="text" class="min" name="s1_min" value="-100.0">
	</p>
	</td>

	<td>
	<p>
	<input type="checkbox" class="checkbox"  name="s2" value="1">サーボ 2:
	<br>
	<input type="text" class="max" name="s2_max" value="100.0">
	<input type="text" class="min" name="s2_min" value="-100.0">
	</p>
	</td>

	<td>
	<p>
	<input type="checkbox" class="checkbox"  name="s3" value="1">サーボ 3:
	<br>
	<input type="text" class="max" name="s3_max" value="100.0">
	<input type="text" class="min" name="s3_min" value="-100.0">
	</p>
	</td>

	<td>
	<p>
	<input type="checkbox" class="checkbox" name="s4" value="1">サーボ 4:
	<br>
	<input type="text" class="max" name="s4_max" value="100.0">
	<input type="text" class="min" name="s4_min" value="-100.0">
	</p>
	</td>

	<td>
	<p>
	<input type="checkbox" class="checkbox"  name="s5" value="1">サーボ 5:
	<br>
	<input type="text" class="max" name="s5_max" value="100.0">
	<input type="text" class="min" name="s5_min" value="-100.0">
	</p>
	</td>

	<td>
	<p>
	<input type="checkbox" class="checkbox"  name="s6" value="1">サーボ 6:
	<br>
	<input type="text" class="max" name="s6_max" value="100.0">
	<input type="text" class="min" name="s6_min" value="-100.0">
	</p>
	</td>

	</tr>


	<tr>
	<td>
	<p>
	<input type="checkbox" class="checkbox" name="s7" value="1">サーボ 7:
	<br>
	<input type="text" class="max" name="s7_max" value="100.0">
	<input type="text" class="min" name="s7_min" value="-100.0">
	</p>
	</td>

	<td>
	<p>
	<input type="checkbox" class="checkbox"  name="s8" value="1">サーボ 8:
	<br>
	<input type="text" class="max" name="s8_max" value="100.0">
	<input type="text" class="min" name="s8_min" value="-100.0">
	</p>
	</td>

	<td>
	<p>
	<input type="checkbox" class="checkbox"  name="s9" value="1">サーボ 9:
	<br>
	<input type="text" class="max" name="s9_max" value="100.0">
	<input type="text" class="min" name="s9_min" value="-100.0">
	</p>
	</td>

	<td>
	<p>
	<input type="checkbox" class="checkbox" name="s10" value="1">サーボ 10:
	<br>
	<input type="text" class="max" name="s10_max" value="100.0">
	<input type="text" class="min" name="s10_min" value="-100.0">
	</p>
	</td>

	<td>
	<p>
	<input type="checkbox" class="checkbox"  name="s11" value="1">サーボ 11:
	<br>
	<input type="text" class="max" name="s11_max" value="100.0">
	<input type="text" class="min" name="s11_min" value="-100.0">
	</p>
	</td>

	<td>
	<p>
	<input type="checkbox" class="checkbox"  name="s12" value="1">サーボ 12:
	<br>
	<input type="text" class="max" name="s12_max" value="100.0">
	<input type="text" class="min" name="s12_min" value="-100.0">
	</p>
	</td>

	</tr>


	<tr>
	<td>
	<p>
	<input type="checkbox" class="checkbox" name="s13" value="1">サーボ 13:
	<br>
	<input type="text" class="max" name="s13_max" value="100.0">
	<input type="text" class="min" name="s13_min" value="-100.0">
	</p>
	</td>

	<td>
	<p>
	<input type="checkbox" class="checkbox"  name="s14" value="1">サーボ 14:
	<br>
	<input type="text" class="max" name="s14_max" value="100.0">
	<input type="text" class="min" name="s14_min" value="-100.0">
	</p>
	</td>

	<td>
	<p>
	<input type="checkbox" class="checkbox"  name="s15" value="1">サーボ 15:
	<br>
	<input type="text" class="max" name="s15_max" value="100.0">
	<input type="text" class="min" name="s15_min" value="-100.0">
	</p>
	</td>

	<td>
	<p>
	<input type="checkbox" class="checkbox" name="s16" value="1">サーボ 16:
	<br>
	<input type="text" class="max" name="s16_max" value="100.0">
	<input type="text" class="min" name="s16_min" value="-100.0">
	</p>
	</td>

	<td>
	<p>
	<input type="checkbox" class="checkbox"  name="s17" value="1">サーボ 17:
	<br>
	<input type="text" class="max" name="s17_max" value="100.0">
	<input type="text" class="min" name="s17_min" value="-100.0">
	</p>
	</td>

	<td>
	<p>
	<input type="checkbox" class="checkbox"  name="s18" value="1">サーボ 18:
	<br>
	<input type="text" class="max" name="s18_max" value="100.0">
	<input type="text" class="min" name="s18_min" value="-100.0">
	</p>
	</td>

	</tr>

	<tr>
	<td>
	<p>
	<input type="checkbox" class="checkbox" name="s19" value="1">サーボ 19:
	<br>
	<input type="text" class="max" name="s19_max" value="100.0">
	<input type="text" class="min" name="s19_min" value="-100.0">
	</p>
	</td>

	<td>
	<p>
	<input type="checkbox" class="checkbox"  name="s20" value="1">サーボ 20:
	<br>
	<input type="text" class="max" name="s20_max" value="100.0">
	<input type="text" class="min" name="s20_min" value="-100.0">
	</p>
	</td>


	</tr>
	
	
	</table>

	<br>


   <div id="vsido_div_top">
     <label>要求<label/>
     <div id="vsido_output_request"></div>
     <label>返事<label/>
     <div id="vsido_output_response"></div>
   </div>
	
  </body>
</html>
